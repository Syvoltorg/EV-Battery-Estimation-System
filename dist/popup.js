(()=>{var e=["password"],t=["password"];function n(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(){window.location.href="../page4/estimate.html"}document.addEventListener("DOMContentLoaded",(function(){console.log("Script is running after DOM loaded");var r=document.getElementById("auth-modal"),l=document.getElementById("auth-modal-backdrop"),a=document.getElementById("close-modal"),d=document.getElementById("login-tab"),i=document.getElementById("signup-tab"),s=document.getElementById("login-form"),c=document.getElementById("signup-form"),u=document.getElementById("login-form-element"),m=document.getElementById("signup-form-element"),g=document.getElementById("login-link"),f=document.getElementById("signup-link"),v=document.getElementById("profile-button"),p=document.getElementById("get-started-button"),E=document.getElementById("login-email"),L=document.getElementById("login-password"),I=document.getElementById("signup-name"),h=document.getElementById("signup-email"),y=document.getElementById("signup-password");function b(){console.log("showModal function called"),r&&l?(r.classList.remove("hidden"),l.classList.remove("hidden"),S()):console.error("Modal elements not found!")}function w(){console.log("hideModal function called"),r&&l?(r.classList.add("hidden"),l.classList.add("hidden")):console.error("Modal elements not found for hiding!")}function S(){console.log("showLoginForm function called"),s&&c&&d&&i?(s.classList.remove("hidden"),c.classList.add("hidden"),d.classList.add("border-blue-500","text-blue-500"),i.classList.remove("border-blue-500","text-blue-500")):console.error("Login form elements not found!")}function B(){console.log("showSignupForm function called"),c&&s&&i&&d?(c.classList.remove("hidden"),s.classList.add("hidden"),i.classList.add("border-blue-500","text-blue-500"),d.classList.remove("border-blue-500","text-blue-500")):console.error("Signup form elements not found!")}function k(){var e=JSON.parse(localStorage.getItem("currentUser")),t=document.getElementById("profile-button"),n=document.getElementById("profile-dropdown"),o=document.getElementById("user-fullname");if(e){var r=e.name?e.name.charAt(0).toUpperCase():e.email.charAt(0).toUpperCase();t.innerHTML='\n        <div class="flex items-center justify-center w-8 h-8 rounded-full bg-white/20 text-white font-semibold">\n          '.concat(r,"\n        </div>\n      "),o.textContent=e.name||e.email,t.addEventListener("click",(function(e){e.stopPropagation(),n.classList.toggle("hidden")})),document.addEventListener("click",(function(e){t.contains(e.target)||n.contains(e.target)||n.classList.add("hidden")})),document.getElementById("logout-button").addEventListener("click",(function(){localStorage.removeItem("currentUser"),location.reload()}))}else t.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />\n        </svg>\n      ',n.classList.add("hidden")}v&&v.addEventListener("click",(function(e){e.preventDefault(),JSON.parse(localStorage.getItem("currentUser"))||b()})),p&&p.addEventListener("click",(function(e){e.preventDefault(),JSON.parse(localStorage.getItem("currentUser"))?o():b()})),a&&a.addEventListener("click",w),l&&l.addEventListener("click",w),d&&d.addEventListener("click",S),i&&i.addEventListener("click",B),g&&g.addEventListener("click",(function(e){e.preventDefault(),S()})),f&&f.addEventListener("click",(function(e){e.preventDefault(),B()})),u&&u.addEventListener("submit",(function(t){t.preventDefault(),function(t,o){var r=JSON.parse(localStorage.getItem("users")||"[]").find((function(e){return e.email===t&&e.password===o}));if(r){r.password;var l=n(r,e);return localStorage.setItem("currentUser",JSON.stringify(l)),!0}return!1}(E.value,L.value)?(alert("Login successful!"),w(),k(),o()):alert("Invalid email or password")})),m&&m.addEventListener("submit",(function(e){e.preventDefault();var r=I.value.trim(),l=h.value.trim(),a=y.value;r&&l&&a?function(e,o,r){var l=JSON.parse(localStorage.getItem("users")||"[]");if(l.some((function(e){return e.email===o})))return!1;var a={name:e,email:o,password:r,createdAt:(new Date).toISOString()};l.push(a),localStorage.setItem("users",JSON.stringify(l));var d=n(a,t);return localStorage.setItem("currentUser",JSON.stringify(d)),!0}(r,l,a)?(alert("Signup successful!"),w(),k(),o()):alert("Email already exists"):alert("Please fill in all fields")})),k()}))})();